var app = getApp(), $ = require("../../utils/util.js"), notice = require("../../utils/notice.js"); Page({ data: { UserCoupon: [], id_checked: 0, IsUseCoupon: 1 }, onLoad: function (e) { app.globalData.getTop(); console.log(e); var t = $.parseJSON(e.val); console.log(t), this.setData({ UserCoupon: t, id_checked: e.id }), console.log(this.data.UserCoupon), console.log(this.data.id_checked) }, changecoupon: function (e) { console.log(e), this.setData({ id_checked: e.currentTarget.dataset.id }), this.goback() }, uesnothing: function () { this.setData({ IsUseCoupon: 0, id_checked: 0 }), this.goback() }, goback: function () { var e = this; $.backpage(1, function () { var t = { couponItemId: e.data.id_checked, IsUseCoupon: e.data.IsUseCoupon }; notice.postNotificationName("RefreshCoupon", t) }) } });